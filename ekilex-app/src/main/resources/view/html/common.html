<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:fragment="common_header(title,links)">
  <title th:replace="${title}" th:text="#{general.title}">EKILEX</title>
  <!-- Common styles and scripts -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <!--<link rel="shortcut icon" th:href="@{/favicon.ico}">-->

  <th:block th:replace=" :: css"></th:block>
  <th:block th:replace=" :: js"></th:block>

  <!--/* Per-page placeholder for additional links */-->
  <th:block th:replace="${links}"/>

  <script th:inline="javascript">
      var applicationUrl = /*[[@{/}]]*/'/';
  </script>
</head>

<body>
<!-- Bootstrap core JS -->
<th:block th:fragment="js">
  <script type="text/javascript" th:src="@{/view/js/jquery-3.2.1.js}"></script>
  <script type="text/javascript" th:src="@{/view/js/bootstrap.bundle.js}"></script>
  <script type="text/javascript" th:src="@{/view/js/bootstrap-confirmation.js}"></script>
  <script type="text/javascript" th:src="@{/view/js/ekilex-common.js}"></script>
</th:block>

<!-- Bootstrap core CSS -->
<th:block th:fragment="css">
  <link rel="stylesheet" th:href="@{/view/css/bootstrap.css}"/>
  <link rel="stylesheet" th:href="@{/view/css/font-awesome.css}"/>
  <link rel="stylesheet" th:href="@{/view/css/common-styles.css}"/>
</th:block>

<!-- debugging aid -->
<div th:fragment="dump_vars" class="m-4">
  <h4>Dump of all variables in Thymeleaf context</h4>
  <hr/>
  <table>
    <tr th:each="var : ${#lists.sort(#vars.getVariableNames())}">
      <td th:text="${var}"></td>
      <td th:text="${#vars.getVariable(var)}"></td>
    </tr>
    <tr>
      <td>param</td>
      <td th:text="${#vars.getVariable('param')}"></td>
    </tr>
    <tr>
      <td>session</td>
      <td th:text="${#vars.getVariable('session')}"></td>
    </tr>
    <tr>
      <td>application</td>
      <td th:text="${#vars.getVariable('application')}"></td>
    </tr>
  </table>
</div>

<th:block th:fragment="ordering_buttons(itemStat)">
  <button th:hidden="${itemStat.first}" class="btn badge badge-secondary order-up float-left">
    <i class="fa fa-arrow-up" aria-hidden="true"></i>
  </button>
  <button th:hidden="${itemStat.last}" class="btn badge badge-secondary order-down float-right">
    <i class="fa fa-arrow-down" aria-hidden="true"></i>
  </button>
</th:block>

<div id="editDlg" class="modal" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <form th:action="@{/modify}" method="post">
        <div class="modal-body">
          <input type="hidden" name="id">
          <input type="hidden" name="op_type">
          <div class="form-group row">
            <div class="col-md-12">
              <textarea class="form-control" rows="2" name="modified_value"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Salvesta</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="editLexemeLevelsDlg" class="modal" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"></h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
      <form th:action="@{/modify_levels}" method="post" class="form-inline">
        <input type="hidden" name="id">
        <input type="hidden" name="action">
        <button type="submit" class="btn btn-primary mr-1" data-action="pop"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
        <div class="col-1 mr-3 pl-2">
          <button type="submit" class="btn btn-primary loat-left mb-5" data-action="up"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
          <button type="submit" class="btn btn-primary float-left" data-action="down"><i class="fa fa-chevron-down" aria-hidden="true"></i></button>
        </div>
        <button type="submit" class="btn btn-primary" data-action="push"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
      </form>
      </div>
    </div>
  </div>
</div>

<div id="addNewDefinitionDlg" class="modal" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <form th:action="@{/add_definition}" method="post">
        <div class="modal-body">
          <input type="hidden" name="id">
          <div class="form-group row">
            <div class="col-md-6">
              <select class="form-control" th:name="language">
                <option th:each="language : ${allLanguages}"
                        th:value="${language.code}"
                        th:text="${language.value}">language</option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-12">
              <textarea class="form-control" rows="2" name="value"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Lisa</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="addNewUsageDlg" class="modal" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <form th:action="@{/add_usage}" method="post">
        <div class="modal-body">
          <input type="hidden" name="id">
          <div class="form-group row">
            <div class="col-md-6">
              <select class="form-control" th:name="language">
                <option th:each="language : ${allLanguages}"
                        th:value="${language.code}"
                        th:text="${language.value}">language</option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-6">
              <select class="form-control" th:name="usage_type">
                <option value="USAGE">Kasutusnäide</option>
                <option value="USAGE_TRANSLATION">Kasutusnäite tõlge</option>
                <option value="USAGE_DEFINITION">Kasutusnäide seletus</option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-12">
              <textarea class="form-control" rows="2" name="value"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Lisa</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="lexemeClassifiersDlg" class="modal" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form th:action="@{/add_classifier}" method="post">
        <div class="modal-body">
          <input type="hidden" name="lexeme_id">
          <input type="hidden" name="meaning_id">
          <input type="hidden" name="value">
          <div class="form-group row">
            <div class="col-md-6">
              <select class="form-control" th:name="classif_name">
                <option value="lexeme_frequency_group">Sagedusrühm</option>
                <option value="lexeme_pos">Sõnaliik</option>
                <option value="meaning_domain">Valdkond</option>
              </select>
            </div>
          </div>
          <div class="form-group row value-group" id="lexeme_frequency_group">
            <div class="col-md-2">
              <select class="form-control value-select">
                <option th:each="freqGroup : ${lexemeFrequencyGroups}"
                        th:value="${freqGroup.code}"
                        th:text="${freqGroup.value}">freqGroup</option>
              </select>
            </div>
          </div>
          <div class="form-group row value-group" id="lexeme_pos">
            <div class="col-md-6">
              <select class="form-control value-select">
                <option th:each="pos : ${allLexemePos}"
                        th:value="${pos.code}"
                        th:text="${pos.value}">pos</option>
              </select>
            </div>
          </div>
          <div class="form-group row value-group" id="meaning_domain">
            <div class="col-md-12">
              <select class="form-control value-select">
                <optgroup th:each="origin : ${addDomains}" th:label="${origin.getKey()}">
                  <option th:each="domain : ${origin.getValue()}"
                          th:value="${domain.toIdString()}"
                          th:text="${domain.origin + ' - ' + domain.value}">domain</option>
                </optgroup>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Lisa</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Katkesta</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="lexemeFrequencyDlg" class="modal select-dlg" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form th:action="@{/modify_classifier}" method="post">
        <div class="modal-body">
          <input type="hidden" name="id">
          <input type="hidden" name="current_value">
          <input type="hidden" name="classif_name" value="lexeme_frequency_group">
          <select class="form-control" name="new_value">
            <option th:each="freqGroup : ${lexemeFrequencyGroups}"
                    th:value="${freqGroup.code}"
                    th:text="${freqGroup.value}">freqGroup</option>
          </select>
        </div>
      </form>
    </div>
  </div>
</div>

</body>
</html>
