<!DOCTYPE html>
<html lang="et" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common :: common_header(_,~{::links})">
<th:block th:fragment="links">
  <script type="text/javascript" th:src="@{/view/js/recorder.js}"></script>
  <script type="text/javascript" th:src="@{/view/js/index_page.js}" src="js/demo/demo.js"></script>
</th:block>
</head>
<body>
  <div class="container-fluid header-container">
    <div class="row header-wrap">
      <div class="col-12 header-panel">
        <a class="logo" th:text="#{button.label.back}"> &lt; Back </a>
        <div class="header-links d-none d-md-block">
          <a th:href="@{/}" class="menu-item selected ">
            <span th:text="#{menu.search}">Otsing</span>
          </a>
          <a th:href="@{/}" class="menu-item ">
            <span th:text="#{menu.learn}">Õpi eesti keelt</span>
          </a>
          <a th:href="@{/}" class="menu-item ">
            <span th:text="#{menu.games}">Keelemängud</span>
          </a>
          <a th:href="@{/}" class="menu-item ">
            <span th:text="#{menu.info}">Portaalist</span>
          </a>
          <a th:href="@{/}" class="menu-item ">
            <span th:text="#{menu.contacts}">Kontakt</span>
          </a>
        </div>
        <button class="menu-btn" th:text="#{button.label.menu}">Menu</button>
      </div>
    </div>
  </div>
  <div class="container-fluid homonym-page">
    <div class="row search-wrap">
      <div class="col-12 search-panel">
        <div class="row">
          <div class="col-md-6">
            <div class="search-lang dropdown">
              <button class="btn btn-light lang-btn" data-toggle="dropdown" id="dropdownMenu2" aria-haspopup="true" aria-expanded="false">
                eesti <span class="icon icon-arrow-right"></span> vene
              </button>
              <form class="dropdown-menu p-4 container" aria-labelledby="dropdwonTest1">
                <div class="row">
                  <div class="col-12">
                    <button class="dropdown-item" type="button">Automaatne keeletuvastus</button>
                  </div>
                  <div class="col-12">
                    <button class="dropdown-item" type="button">eesti ükskeelne</button>
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="row">
                  <div class="col-6">
                    <button class="dropdown-item active" type="button">eesti keel</button>
                    <button class="dropdown-item" type="button">vene keel</button>
                    <button class="dropdown-item" type="button">inglise keel</button>
                  </div>
                  <div class="col-6">
                    <button class="dropdown-item" type="button">eesti keel</button>
                    <button class="dropdown-item active" type="button">vene keel</button>
                    <button class="dropdown-item" type="button">inglise keel</button>
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="row">
                  <div class="col-12">
                    <button class="btn btn-light" type="button">Jätka</button>
                  </div>
                </div>              
              </form>
            </div>
          </div>
          <div class="col-md-6 col-lg-5 order-md-first">
            <div class="search-main"></div>
            <div class="search-main">
              <form th:action="@{/}" th:method="post">
                <div class="awesomplete">
                  <input type="text" class="form-control search-phrase" th:name="simpleSearchFilter" th:value="${simpleSearchFilter}" list="mylist" placeholder="Kirjuta mõni sõna">
                  <ul class="d-none">
                    <li>
                      <mark>Highl</mark>
                      ighted
                    </li>
                    <li>Regular</li>
                    <li aria-selected="true">Selected row</li>
                  </ul>
                </div>
                <div class="extra-buttons">
                  <button type="button" class="btn btn-light clear-btn">
                    <span class="icon icon-close"></span>
                  </button>
                  <button type="button" id="start-rec-btn" class="btn btn-light speak-btn" >
                    <span class="icon icon-mic"></span>
                  </button>
                  <button type="button" id="stop-rec-btn" class="btn btn-light speak-btn" hidden th:text="#{button.label.stop.rec}">Finish</button>
                </div>
                <button type="submit" class="btn btn-green search-btn">
                  <span class="icon icon-search"></span>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row homonym-wrap" th:if="${!#lists.isEmpty(words)}">
      <div class="col-12 homonym-panel">
        <ul class="homonym-list">
          <li th:each="word : ${words}">
            <a class="homonym-item" th:onclick="'fetchDetails(' + ${word.wordId} + ')'">
              <span class="homonym-item-wrap">
                <span class="homonym-header">
                  <div class="homonym-name-container">
                    <span class="homonym-name" th:text="${word.word}">tee</span>
                  </div>
                  <span class="homonym-nr" th:text="${word.homonymNr}">1</span>
                </span>
                <span class="homonym-matches" th:text="${#strings.listJoin(word.meaningWords, ', ')}">дорога, дорога, дорога</span>
                <span class="homonym-intro">
                  <span th:if="${not #lists.isEmpty(word.definitions)}">
                    <span th:each="definition,definitionIter : ${word.definitions}">
                      <span th:text="${definition.value}"></span>
                      <span th:unless="${definitionIter.last}">, </span>
                    </span>
                  </span>
                  <span>&nbsp;</span>
                </span>
              </span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="word-details"></div>
    <div class="row word-details" th:fragment="worddetails" th:if="${!#lists.isEmpty(wordData.lexemes)}">
      <div class="col-12 content-panel d-none d-md-block">
        <div class="row">
          <div class="col-md-8 main-data">
            <div class="level-2-panel">
              <div class="level-3-panel row" th:each="lexeme : ${wordData.lexemes}">
                <span class="dictionary-source" th:text="${lexeme.datasetName}">Eesti-vene sõnaraamat</span>
                <div class="col-6">
                  <div class="matches">
                    <h6 th:if="${not #lists.isEmpty(lexeme.meaningWords)}">
                      <span th:each="meaningWord,meaningWordIter : ${lexeme.meaningWords}">
                        <span th:text="${meaningWord.word}"></span>
                        <span th:unless="${meaningWordIter.last}">, </span>
                      </span>
                    </h6>
                  </div>
                  <div class="definition">
                    <span th:each="definition,definitionIter : ${lexeme.definitions}">
                      <span th:text="${definition.value}"></span>
                      <span th:unless="${definitionIter.last}">, </span>
                    </span>
                  </div>
                  <!-- Sõnaliik -->
                  <div class="word-type" th:if="${not #lists.isEmpty(lexeme.poses)}">
                    <span class="tag" th:each="pos : ${lexeme.poses}" th:text="${pos.value}"></span>
                  </div>
                  <div class="synonyms">
                    <a href="" class="synonym">lähtekeele</a>
                    <a href="" class="synonym">sünonüümid</a>
                    <a href="" class="synonym">siia</a>
                  </div>
                  <div class="additional-meta">
                    <!-- need vajavad kõik veel kujundamist. enamus on komplekstüüpide kollektsioonid -->
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.adviceNotes)}">
                      <div class="col-3"><b>Keelenõu</b></div>
                      <div class="col-9">
                        <div th:each="note : ${lexeme.adviceNotes}" th:text="${note}"></div>
                      </div>
                    </div>
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.learnerComments)}">
                      <div class="col-3"><b>Õppekommentaar</b></div>
                      <div class="col-9">
                        <div th:each="note : ${lexeme.learnerComments}" th:text="${note}"></div>
                      </div>
                    </div>
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.publicNotes)}">
                      <div class="col-3"><b>Märkused</b></div>
                      <div class="col-9">
                        <div th:each="note : ${lexeme.publicNotes}" th:text="${note}"></div>
                      </div>
                    </div>
                    <!---->
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.registers)}">
                      <div class="col-3"><b>Register</b></div>
                      <div class="col-9">
                        <div th:each="register : ${lexeme.registers}" th:text="${register.value}"></div>
                      </div>
                    </div>
                    <!-- Kliendiga kokku lepitud: Tuletuskoodi ei näita
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.derivs)}">
                      <div class="col-3"><b>Tuletuskood</b></div>
                      <div class="col-9">
                        <div th:each="deriv : ${lexeme.derivs}" th:text="${deriv.value}"></div>
                      </div>
                    </div>-->
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.domains)}">
                      <div class="col-3"><b>Valdkond</b></div>
                      <div class="col-9">
                        <div th:each="domain : ${lexeme.domains}" th:text="${domain.value}"></div>
                      </div>
                    </div>
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.grammars)}">
                      <div class="col-3"><b>Grammar</b></div>
                      <div class="col-9">
                        <div th:each="note : ${lexeme.grammars}" th:text="${note}"></div>
                      </div>
                    </div>
                    <!-- Kliendiga kokku lepitud: Tuletuskoodi ei näita
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.systematicPolysemyPatterns)}">
                      <div class="col-3"><b>süst-polüseemia mall</b></div>
                      <div class="col-9">
                        <div th:each="patter : ${lexeme.systematicPolysemyPatterns}" th:text="${patter}"></div>
                      </div>
                    </div>-->
                    <!-- Kliendiga kokku lepitud: Tuletuskoodi ei näita
                    <div class="row" th:if="${not #lists.isEmpty(lexeme.semanticTypes)}">
                      <div class="col-3"><b>Semantiline tüüp</b></div>
                      <div class="col-9">
                        <div th:each="semanticType : ${lexeme.semanticTypes}" th:text="${semanticType}"></div>
                      </div>
                    </div>-->
                  </div>
                </div>
                <button class="more-btn">
                  <span class="icon icon-chevron-left"></span>
                </button>
                <div class="dependencies col-lg-6" th:if="${not #lists.isEmpty(lexeme.governments)}">
                  <!-- rektsioonid -->
                  <div class="dependence" th:each="government : ${lexeme.governments}">
                    <div data-toggle="tooltip" th:title="${government.government}">
                      <div th:if="${not #lists.isEmpty(government.usageMeanings)}">
                        <!-- kasutusnäite tähendused -->
                        <span class="example-item" th:each="usageMeaning : ${government.usageMeanings}">
                          <!-- Kliendiga kokku lepitud: Kasutusnäite tähendusI ei näita -->
                          <!-- <span th:text="${usageMeaning.usageMeaningType.value}" th:if="${usageMeaning.usageMeaningType != null}">
                          </span> -->
                          <!-- kasutusnäited -->
                          <span th:if="${not #lists.isEmpty(usageMeaning.usages)}">
                            <span th:each="usage : ${usageMeaning.usages}" th:data-words="${usage.usage}" onclick="generateVoiceAndPlay(this)">
                              <span class="example-text" th:text="${usage.usage}"></span>
                              <span class="example-text" th:text="${usage.usageAuthor}" th:if="${usage.usageAuthor != null}"></span>
                              <span class="example-text" th:text="${usage.usageTranslator}" th:if="${usage.usageTranslator != null}"></span>
                              <button class="btn btn-speaker">
                                <span class="icon icon-speaker"></span>
                              </button>
                            </span>
                          </span>
                          <!-- kasutusnäidete tõlked -->
                          <span th:if="${not #lists.isEmpty(usageMeaning.usageTranslations)}">
                            <span th:each="usageTranslation : ${usageMeaning.usageTranslations}">
                              <span th:text="${usageTranslation}"></span>
                            </span>
                          </span>
                          <!-- kasutusnäidete seletused -->
                          <!-- Kliendiga kokku lepitud: Kasutusnäite seletusi ei näita -->
                          <!-- <span th:if="${not #lists.isEmpty(usageMeaning.usageDefinitions)}">
                            <span th:each="usageDefinition : ${usageMeaning.usageDefinitions}">
                              <span class="example-text" th:text="${usageDefinition}"></span>
                            </span>
                          </span> -->
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4 more-data">
            <!-- <h5>Käändelised vormid</h5> -->
            <div th:if="${not #lists.isEmpty(wordData.paradigms)}">
              <div th:each="paradigm : ${wordData.paradigms}">
                <div th:if="${not #lists.isEmpty(paradigm.forms)}">
                  <table>
                    <tr th:each="form : ${paradigm.forms}">
                      <td>
                        <span th:text="${form.morph.value}" th:if="${form.morph != null}"></span>
                      </td>
                      <td>
                        <span th:text="${form.form}"></span>
                      </td>
                      <td>
                        <span th:text="${form.displayForm}" th:unless="${#strings.isEmpty(form.displayForm)}"></span>
                      </td>
                      <td>
                        <span th:text="${form.vocalForm}" th:unless="${#strings.isEmpty(form.vocalForm)}"></span>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
            <div th:if="${not #lists.isEmpty(wordData.imageFiles)}">
              <img th:each="imageFile : ${wordData.imageFiles}" th:src="@{'/files/images/' + ${imageFile}}"></img>
            </div>
            <div th:if="${not #lists.isEmpty(wordData.sentences)}">
              <hr/>
              <div style="margin-bottom: 0.5em;" th:each="sentence : ${wordData.sentences}" th:text="${sentence.getSentence()}"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script th:inline="javascript">
  	initialisePage();
  	initialiseRecording(/*[[${speechRecognitionServiceUrl}]]*/'/');
  </script>
</body>
</html>
